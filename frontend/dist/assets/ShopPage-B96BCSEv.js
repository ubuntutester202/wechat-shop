import{u as E,r,j as e,S as B,B as H}from"./index-DWm9dxUp.js";import{P as u}from"./ProductCard-CZ0cuVpc.js";import{m as I,a as Z,b as W,t as A}from"./products-JVGU342a.js";const q=()=>{const c=E(),[n,f]=r.useState(""),[d,g]=r.useState({hours:0,minutes:36,seconds:58}),[j,b]=r.useState([]),[p,v]=r.useState([]),[N,x]=r.useState(!0);r.useEffect(()=>{(async()=>{var t,a;try{x(!0);const i=await(await fetch("/api/products?limit=20")).json(),P=((t=i.data)==null?void 0:t.filter(o=>o.isNew))||[];b(P);const M=((a=i.data)==null?void 0:a.filter(o=>o.category==="clothing"))||[];v(M)}catch(l){console.error("获取商品数据失败:",l)}finally{x(!1)}})()},[]),r.useEffect(()=>{const s=setInterval(()=>{g(t=>t.seconds>0?{...t,seconds:t.seconds-1}:t.minutes>0?{...t,minutes:t.minutes-1,seconds:59}:t.hours>0?{hours:t.hours-1,minutes:59,seconds:59}:t)},1e3);return()=>clearInterval(s)},[]);const w=s=>{f(s.target.value)},y=s=>{s.key==="Enter"&&m()},m=()=>{n.trim()&&(console.log("Search for:",n),c(`/search?q=${encodeURIComponent(n.trim())}`))},C=s=>{console.log("Navigate to category:",s)},h=s=>{console.log("Navigate to product:",s),c(`/product/${s}`)},L=s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden relative",children:[e.jsxs("div",{className:"w-24 h-32 bg-gray-200 relative",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover",onError:t=>{const a=t.target;a.style.display="none";const l=a.nextElementSibling;l&&(l.classList.remove("hidden"),l.classList.add("flex"))}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-100 to-purple-100 items-center justify-center hidden",children:e.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-full"})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("svg",{width:"11",height:"10",viewBox:"0 0 11 10",fill:"none",className:"text-primary",children:e.jsx("path",{d:"M5.5 9L4.975 8.525C2.55 6.34 1 5.02 1 3.4C1 2.15 1.975 1.2 3.25 1.2C3.925 1.2 4.575 1.525 5 2.025C5.425 1.525 6.075 1.2 6.75 1.2C8.025 1.2 9 2.15 9 3.4C9 5.02 7.45 6.34 5.025 8.525L5.5 9Z",fill:"currentColor"})})})]}),e.jsxs("div",{className:"absolute bottom-2 left-1 right-1",children:[e.jsx("div",{className:"text-xs font-bold text-gray-900 mb-1",children:s.rating}),e.jsx("div",{className:`text-xs font-medium ${s.tag==="New"?"text-blue-600":s.tag==="Sale"?"text-red-600":s.tag==="Hot"?"text-orange-600":"text-gray-600"}`,children:s.tag})]})]},s.id),k=s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 cursor-pointer",onClick:()=>C(s.id),children:[e.jsxs("div",{className:"w-16 h-16 bg-gray-200 rounded mb-3 mx-auto",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover rounded",onError:t=>{const a=t.target;a.style.display="none";const l=a.nextElementSibling;l&&(l.classList.remove("hidden"),l.classList.add("flex"))}}),e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-100 to-purple-100 rounded items-center justify-center hidden",children:e.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full"})})]}),e.jsx("h3",{className:"font-bold text-sm text-gray-900 mb-1",children:s.name}),e.jsx("div",{className:"bg-blue-50 rounded px-2 py-1 inline-block",children:e.jsx("span",{className:"text-xs font-bold text-gray-900",children:s.count})})]},s.id),S=s=>e.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[e.jsxs("div",{className:"w-15 h-15 bg-white rounded-full shadow-md mb-2 overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover",onError:t=>{var i;const a=t.target;a.style.display="none";const l=(i=a.parentElement)==null?void 0:i.querySelector(".fallback");l&&(l.classList.remove("hidden"),l.classList.add("flex"))}}),e.jsx("div",{className:"fallback w-full h-full bg-gradient-to-br from-blue-100 to-purple-100 rounded-full items-center justify-center hidden",children:e.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full"})})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900 text-center",children:s.name})]},s.id);return N?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsx(B,{}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"px-5 pt-4 pb-2",children:e.jsx("h1",{className:"font-raleway font-bold text-3xl text-gray-900",children:"Shop"})}),e.jsx("div",{className:"px-5 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search",value:n,onChange:w,onKeyPress:y,className:"w-full bg-gray-100 rounded-2xl px-4 py-2.5 pr-12 text-sm outline-none focus:bg-gray-50 transition-colors","aria-label":"搜索商品"}),e.jsx("button",{onClick:m,className:"absolute right-3 top-1/2 -translate-y-1/2","aria-label":"搜索",children:e.jsx("svg",{width:"20",height:"16",viewBox:"0 0 20 16",fill:"none",className:"text-primary",children:e.jsx("path",{d:"M19 15L13 9M15 7C15 10.866 11.866 14 8 14C4.134 14 1 10.866 1 7C1 3.134 4.134 0 8 0C11.866 0 15 3.134 15 7Z",stroke:"currentColor",strokeWidth:"1"})})})]})}),e.jsx("div",{className:"px-5 mb-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-8 -left-8 w-32 h-32 bg-yellow-300 rounded-full opacity-70"}),e.jsx("div",{className:"absolute top-4 right-12 w-24 h-24 bg-yellow-400 rounded-full opacity-60"}),e.jsx("div",{className:"absolute -bottom-4 right-8 w-20 h-20 bg-yellow-300 rounded-full opacity-70"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"font-raleway font-bold text-2xl text-gray-900 mb-1",children:"Big Sale"}),e.jsxs("p",{className:"font-raleway font-bold text-sm text-gray-900 mb-1",children:["Happening",e.jsx("br",{}),"Now"]}),e.jsx("p",{className:"font-nunito font-bold text-xs text-gray-900 mb-3",children:"Up to 50%"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-10 h-2 bg-white rounded-full"}),e.jsx("div",{className:"w-2 h-2 bg-white/50 rounded-full"}),e.jsx("div",{className:"w-2 h-2 bg-white/50 rounded-full"}),e.jsx("div",{className:"w-2 h-2 bg-white/50 rounded-full"}),e.jsx("div",{className:"w-2 h-2 bg-white/50 rounded-full"})]})]})]})}),e.jsxs("div",{className:"px-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"font-raleway font-bold text-xl text-gray-900",children:"Categories"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900 mr-2",children:"See All"}),e.jsx("div",{className:"w-7 h-7 bg-primary rounded-full flex items-center justify-center",children:e.jsx("svg",{width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",className:"text-white",children:e.jsx("path",{d:"M8.5 1L13 5.5L8.5 10M13 5.5H1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:I.slice(0,6).map(k)})]}),e.jsxs("div",{className:"px-5 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h2",{className:"font-raleway font-bold text-xl text-gray-900 mr-3",children:"Flash Sale"}),e.jsx("svg",{width:"17",height:"20",viewBox:"0 0 17 20",fill:"none",className:"text-primary",children:e.jsx("path",{d:"M8.5 0C13.194 0 17 3.806 17 8.5C17 13.194 13.194 17 8.5 17C3.806 17 0 13.194 0 8.5C0 3.806 3.806 0 8.5 0ZM8.5 2C4.91 2 2 4.91 2 8.5C2 12.09 4.91 15 8.5 15C12.09 15 15 12.09 15 8.5C15 4.91 12.09 2 8.5 2ZM8.5 4C8.776 4 9 4.224 9 4.5V8.5C9 8.776 8.776 9 8.5 9H6.5C6.224 9 6 8.776 6 8.5C6 8.224 6.224 8 6.5 8H8V4.5C8 4.224 8.224 4 8.5 4Z",fill:"currentColor"})})]}),e.jsx("div",{className:"flex space-x-1",children:[{value:d.hours.toString().padStart(2,"0"),label:"时"},{value:d.minutes.toString().padStart(2,"0"),label:"分"},{value:d.seconds.toString().padStart(2,"0"),label:"秒"}].map((s,t)=>e.jsx("div",{className:"bg-gray-200 rounded px-2 py-1",children:e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.value})},t))})]}),e.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2",children:Z.map(s=>e.jsx("div",{className:"flex-shrink-0 w-28",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden relative",children:e.jsxs("div",{className:"w-full h-28 bg-gray-200 relative",children:[e.jsx("img",{src:s.product.image,alt:s.product.name,className:"w-full h-full object-cover",onError:t=>{const a=t.target;a.style.display="none";const l=a.nextElementSibling;l&&(l.classList.remove("hidden"),l.classList.add("flex"))}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-100 to-purple-100 items-center justify-center hidden",children:e.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-full"})}),e.jsx("div",{className:"absolute top-1 left-1",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-red-500 text-white text-xs font-bold px-2 py-1 rounded-tr rounded-bl",children:"-20%"})})]})})},s.id))})]}),e.jsxs("div",{className:"px-5 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"font-raleway font-bold text-xl text-gray-900",children:"Most Popular"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900 mr-2",children:"See All"}),e.jsx("div",{className:"w-7 h-7 bg-primary rounded-full flex items-center justify-center",children:e.jsx("svg",{width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",className:"text-white",children:e.jsx("path",{d:"M8.5 1L13 5.5L8.5 10M13 5.5H1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2",children:W.map(L)})]}),e.jsxs("div",{className:"px-5 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"font-raleway font-bold text-xl text-gray-900",children:"New Items"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900 mr-2",children:"See All"}),e.jsx("div",{className:"w-7 h-7 bg-primary rounded-full flex items-center justify-center",children:e.jsx("svg",{width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",className:"text-white",children:e.jsx("path",{d:"M8.5 1L13 5.5L8.5 10M13 5.5H1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-2",children:j.map(s=>e.jsx(u,{product:s,onClick:h,className:"flex-shrink-0 w-36"},s.id))})]}),e.jsxs("div",{className:"px-5 mb-6",children:[e.jsx("h2",{className:"font-raleway font-bold text-xl text-gray-900 mb-4",children:"Top Products"}),e.jsx("div",{className:"flex justify-between",children:A.map(S)})]}),e.jsxs("div",{className:"px-5 mb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"font-raleway font-bold text-xl text-gray-900",children:"Just For You"}),e.jsx("div",{className:"flex items-center",children:e.jsx("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",className:"text-primary mr-1",children:e.jsx("path",{d:"M7 0L8.854 4.708L14 4.708L9.573 7.584L11.427 12.292L7 9.416L2.573 12.292L4.427 7.584L0 4.708L5.146 4.708L7 0Z",fill:"currentColor"})})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:p.map(s=>e.jsx(u,{product:s,onClick:h},s.id))})]})]}),e.jsx(H,{})]})};export{q as default};
//# sourceMappingURL=ShopPage-B96BCSEv.js.map
