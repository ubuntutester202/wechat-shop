{"version":3,"file":"ProductDetailPage-BT6jt0z_.js","sources":["../../src/components/ui/ProductSpecModal.tsx","../../src/pages/product/ProductDetailPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Product, ProductVariant } from '../../assets/data/mock/products';\n\ninterface ProductSpecModalProps {\n  product: Product;\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: (selectedVariants: { [key: string]: string }, quantity: number, finalPrice: number) => void;\n  confirmText: string; // \"加入购物车\" 或 \"立即购买\"\n  initialVariants?: { [key: string]: string };\n  initialQuantity?: number;\n}\n\nconst ProductSpecModal: React.FC<ProductSpecModalProps> = ({\n  product,\n  isOpen,\n  onClose,\n  onConfirm,\n  confirmText,\n  initialVariants = {},\n  initialQuantity = 1\n}) => {\n  const [selectedVariants, setSelectedVariants] = useState<{ [key: string]: string }>({});\n  const [quantity, setQuantity] = useState(1);\n  const [currentPrice, setCurrentPrice] = useState(product.price);\n\n  // 当弹框打开时重置状态\n  useEffect(() => {\n    if (isOpen) {\n      // 重新计算默认变体\n      let variants: { [key: string]: string } = {};\n      if (product.variants) {\n        const variantTypes = Array.from(new Set(product.variants.map(v => v.type)));\n        variantTypes.forEach(type => {\n          const firstVariant = product.variants?.find(v => v.type === type);\n          if (firstVariant) {\n            variants[type] = firstVariant.value;\n          }\n        });\n      }\n      \n      setSelectedVariants(variants);\n      setQuantity(1);\n    }\n  }, [isOpen]);\n\n  // 计算当前选中规格的价格\n  useEffect(() => {\n    let price = product.price;\n    if (product.variants) {\n      // 计算价格调整\n      Object.entries(selectedVariants).forEach(([type, value]) => {\n        const variant = product.variants?.find(v => v.type === type && v.value === value);\n        if (variant && variant.priceModifier) {\n          price += variant.priceModifier;\n        }\n      });\n    }\n    setCurrentPrice(price);\n  }, [selectedVariants, product]);\n\n  // 获取当前选中规格的库存\n  const getCurrentStock = () => {\n    if (!product.variants) return product.stock || 0;\n    \n    // 简化处理：返回选中规格中库存最少的\n    const selectedVariantItems = Object.entries(selectedVariants).map(([type, value]) => \n      product.variants?.find(v => v.type === type && v.value === value)\n    ).filter(Boolean);\n    \n    if (selectedVariantItems.length === 0) return product.stock || 0;\n    \n    const minStock = Math.min(\n      ...selectedVariantItems.map(v => v?.stock || product.stock || 0)\n    );\n    \n    return Math.min(minStock, product.stock || 0);\n  };\n\n  const handleVariantSelect = (type: string, value: string) => {\n    setSelectedVariants(prev => ({\n      ...prev,\n      [type]: value\n    }));\n  };\n\n  const handleQuantityChange = (newQuantity: number) => {\n    const maxStock = getCurrentStock();\n    if (newQuantity >= 1 && newQuantity <= maxStock) {\n      setQuantity(newQuantity);\n    }\n  };\n\n  const handleConfirm = () => {\n    // 检查是否已选择所有必需的变体\n    if (product.variants) {\n      const requiredVariants = Array.from(new Set(product.variants.map(v => v.type)));\n      const missingVariants = requiredVariants.filter(type => !selectedVariants[type]);\n      \n      if (missingVariants.length > 0) {\n        alert(`请选择${missingVariants.join('、')}`);\n        return;\n      }\n    }\n\n    onConfirm(selectedVariants, quantity, currentPrice);\n    onClose();\n  };\n\n  // 渲染变体选择器\n  const renderVariantSelector = (type: string, variants: ProductVariant[]) => {\n    const typeVariants = variants.filter(v => v.type === type);\n    const displayName = type === 'color' ? '颜色' : type === 'size' ? '尺寸' : '选项';\n    \n    return (\n      <div key={type} className=\"mb-6\">\n        <h3 className=\"text-sm font-medium text-gray-900 mb-3\">{displayName}</h3>\n        <div className=\"flex flex-wrap gap-2\">\n          {typeVariants.map(variant => {\n            const isSelected = selectedVariants[type] === variant.value;\n            const isOutOfStock = (variant.stock || 0) <= 0;\n            \n            return (\n              <button\n                key={variant.id}\n                onClick={() => !isOutOfStock && handleVariantSelect(type, variant.value)}\n                disabled={isOutOfStock}\n                className={`px-4 py-2 rounded-md border text-sm font-medium transition-colors ${\n                  isOutOfStock\n                    ? 'border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed'\n                    : isSelected\n                    ? 'border-blue-500 bg-blue-50 text-blue-600'\n                    : 'border-gray-300 bg-white text-gray-700 hover:border-gray-400'\n                }`}\n              >\n                {variant.value}\n                {isOutOfStock && <span className=\"ml-1 text-xs\">(缺货)</span>}\n                {variant.priceModifier && variant.priceModifier !== 0 && (\n                  <span className=\"ml-1 text-xs\">\n                    {variant.priceModifier > 0 ? '+' : ''}¥{variant.priceModifier.toFixed(2)}\n                  </span>\n                )}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  const currentStock = getCurrentStock();\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-hidden\">\n      {/* 背景遮罩 */}\n      <div \n        className=\"absolute inset-0 bg-black bg-opacity-50 transition-opacity\"\n        onClick={onClose}\n      />\n      \n      {/* 弹框内容 */}\n      <div className=\"absolute bottom-0 left-0 right-0 bg-white rounded-t-xl max-h-[90vh] overflow-hidden\">\n        {/* 头部 */}\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-medium text-gray-900\">选择规格</h2>\n          <button\n            onClick={onClose}\n            className=\"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100\"\n            title=\"关闭\"\n            aria-label=\"关闭规格选择弹框\"\n          >\n            <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* 滚动内容区域 */}\n        <div className=\"overflow-y-auto\" style={{ maxHeight: 'calc(90vh - 140px)' }}>\n          {/* 商品信息 */}\n          <div className=\"p-4 border-b border-gray-100\">\n            <div className=\"flex items-start gap-4\">\n              <img\n                src={product.image}\n                alt={product.name}\n                className=\"w-20 h-20 rounded-md object-cover\"\n              />\n              <div className=\"flex-1\">\n                <h3 className=\"font-medium text-gray-900 mb-1\">{product.name}</h3>\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span className=\"text-xl font-bold text-red-600\">¥{currentPrice.toFixed(2)}</span>\n                  {currentPrice !== product.price && (\n                    <span className=\"text-sm text-gray-500 line-through\">¥{product.price.toFixed(2)}</span>\n                  )}\n                </div>\n                <div className=\"text-sm text-gray-600\">\n                  库存：{currentStock}件\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* 规格选择 */}\n          <div className=\"p-4\">\n            {product.variants && product.variants.length > 0 && (\n              <div className=\"mb-6\">\n                {Array.from(new Set(product.variants.map(v => v.type))).map(type => \n                  renderVariantSelector(type, product.variants!)\n                )}\n              </div>\n            )}\n\n            {/* 数量选择 */}\n            <div className=\"mb-6\">\n              <h3 className=\"text-sm font-medium text-gray-900 mb-3\">数量</h3>\n              <div className=\"flex items-center gap-3\">\n                <button\n                  onClick={() => handleQuantityChange(quantity - 1)}\n                  disabled={quantity <= 1}\n                  className=\"w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title=\"减少数量\"\n                  aria-label=\"减少数量\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M20 12H4\" />\n                  </svg>\n                </button>\n                <span className=\"text-lg font-medium w-12 text-center\">{quantity}</span>\n                <button\n                  onClick={() => handleQuantityChange(quantity + 1)}\n                  disabled={quantity >= currentStock}\n                  className=\"w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title=\"增加数量\"\n                  aria-label=\"增加数量\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                  </svg>\n                </button>\n              </div>\n              <div className=\"text-sm text-gray-500 mt-2\">\n                总价：¥{(currentPrice * quantity).toFixed(2)}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 底部操作按钮 */}\n        <div className=\"p-4 border-t border-gray-200\">\n          <button\n            onClick={handleConfirm}\n            disabled={currentStock <= 0}\n            className={`w-full py-3 px-4 rounded-lg font-medium transition-colors ${\n              currentStock <= 0\n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                : confirmText === '立即购买'\n                ? 'bg-red-500 text-white hover:bg-red-600'\n                : 'bg-yellow-500 text-white hover:bg-yellow-600'\n            }`}\n          >\n            {currentStock <= 0 ? '暂无库存' : confirmText}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductSpecModal; ","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { \r\n  getProductById, \r\n  getProductReviews, \r\n  Product, \r\n  ProductVariant, \r\n  ProductReview \r\n} from '../../assets/data/mock/products';\r\nimport { useCartStore } from '../../stores/cartStore';\r\nimport StatusBar from '../../components/common/StatusBar';\r\nimport ProductSpecModal from '../../components/ui/ProductSpecModal';\r\n\r\n/**\r\n * 商品详情页面组件\r\n * 参考淘宝商品详情页面设计，包含：\r\n * - 商品图片轮播\r\n * - 商品基本信息（标题、价格、评分）\r\n * - 规格选择（颜色、尺寸等）\r\n * - 库存信息\r\n * - 商品描述\r\n * - 用户评价\r\n * - 操作按钮（收藏、加购物车、立即购买）\r\n */\r\nconst ProductDetailPage: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const { addItem } = useCartStore();\r\n  \r\n  // 状态管理\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [reviews, setReviews] = useState<ProductReview[]>([]);\r\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0);\r\n  const [isFavorite, setIsFavorite] = useState(false);\r\n  const [activeTab, setActiveTab] = useState<'details' | 'reviews'>('details');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  \r\n  // 弹框状态\r\n  const [isSpecModalOpen, setIsSpecModalOpen] = useState(false);\r\n  const [modalMode, setModalMode] = useState<'cart' | 'buy'>('cart');\r\n\r\n  // 获取商品数据\r\n  useEffect(() => {\r\n    if (id) {\r\n      setIsLoading(true);\r\n      \r\n      // 模拟API调用\r\n      setTimeout(() => {\r\n        const productData = getProductById(id);\r\n        const reviewData = getProductReviews(id);\r\n        \r\n        if (productData) {\r\n          setProduct(productData);\r\n          setReviews(reviewData);\r\n        }\r\n        \r\n        setIsLoading(false);\r\n      }, 300);\r\n    }\r\n  }, [id]);\r\n\r\n  // 处理返回按钮\r\n  const handleGoBack = () => {\r\n    navigate(-1);\r\n  };\r\n\r\n  // 处理图片切换\r\n  const handleImageChange = (index: number) => {\r\n    setSelectedImageIndex(index);\r\n  };\r\n\r\n  // 处理收藏\r\n  const handleToggleFavorite = () => {\r\n    setIsFavorite(!isFavorite);\r\n    // TODO: 调用收藏API\r\n  };\r\n\r\n  // 处理加入购物车按钮点击\r\n  const handleAddToCartClick = () => {\r\n    if (!product) return;\r\n    setModalMode('cart');\r\n    setIsSpecModalOpen(true);\r\n  };\r\n\r\n  // 处理立即购买按钮点击\r\n  const handleBuyNowClick = () => {\r\n    if (!product) return;\r\n    setModalMode('buy');\r\n    setIsSpecModalOpen(true);\r\n  };\r\n\r\n  // 处理规格选择确认\r\n  const handleSpecConfirm = (selectedVariants: { [key: string]: string }, quantity: number, finalPrice: number) => {\r\n    if (!product) return;\r\n\r\n    // 添加到购物车\r\n    addItem({\r\n      productId: product.id,\r\n      name: product.name,\r\n      price: finalPrice, // 使用计算后的最终价格\r\n      image: product.image,\r\n      quantity,\r\n      selectedVariants,\r\n      stock: product.stock || 0\r\n    });\r\n\r\n    if (modalMode === 'cart') {\r\n      alert('已添加到购物车');\r\n    } else {\r\n      // 立即购买：跳转到结算页面\r\n      alert('跳转到结算页面'); // TODO: 实际实现\r\n      // navigate('/checkout');\r\n    }\r\n  };\r\n\r\n  // 渲染星级评分\r\n  const renderStarRating = (rating: number) => {\r\n    const stars = [];\r\n    for (let i = 1; i <= 5; i++) {\r\n      stars.push(\r\n        <span key={i} className={`text-lg ${i <= rating ? 'text-yellow-400' : 'text-gray-300'}`}>\r\n          ⭐\r\n        </span>\r\n      );\r\n    }\r\n    return stars;\r\n  };\r\n\r\n\r\n\r\n  // 渲染评价项\r\n  const renderReviewItem = (review: ProductReview) => (\r\n    <div key={review.id} className=\"border-b border-gray-200 pb-4 mb-4\">\r\n      <div className=\"flex items-center mb-2\">\r\n        <div className=\"w-10 h-10 bg-gray-300 rounded-full mr-3\">\r\n          {review.userAvatar && (\r\n            <img \r\n              src={review.userAvatar} \r\n              alt={review.userName}\r\n              className=\"w-full h-full rounded-full object-cover\"\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"font-medium text-gray-900\">{review.userName}</span>\r\n            {review.verified && (\r\n              <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\">已购买</span>\r\n            )}\r\n          </div>\r\n          <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n            <div className=\"flex\">\r\n              {renderStarRating(review.rating)}\r\n            </div>\r\n            <span>{review.createdAt.toLocaleDateString()}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <h4 className=\"font-medium text-gray-900 mb-1\">{review.title}</h4>\r\n      <p className=\"text-gray-600 mb-2\">{review.content}</p>\r\n      {review.variant && (\r\n        <span className=\"text-sm text-gray-500\">已购买：{review.variant}</span>\r\n      )}\r\n      {review.images && review.images.length > 0 && (\r\n        <div className=\"flex gap-2 mt-2\">\r\n          {review.images.map((image, index) => (\r\n            <img\r\n              key={index}\r\n              src={image}\r\n              alt={`评价图片${index + 1}`}\r\n              className=\"w-20 h-20 rounded-md object-cover\"\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        <StatusBar />\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        <StatusBar />\r\n        <div className=\"flex flex-col items-center justify-center h-64\">\r\n          <p className=\"text-gray-500 mb-4\">商品不存在</p>\r\n          <button\r\n            onClick={handleGoBack}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n          >\r\n            返回\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentImages = product.images || [product.image];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <StatusBar />\r\n      \r\n      {/* 头部导航 */}\r\n      <div className=\"bg-white shadow-sm sticky top-0 z-10\">\r\n        <div className=\"flex items-center justify-between px-4 py-3\">\r\n          <button\r\n            onClick={handleGoBack}\r\n            className=\"flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100\"\r\n            title=\"返回上一页\"\r\n          >\r\n            <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n          </button>\r\n          <h1 className=\"text-lg font-medium text-gray-900\">商品详情</h1>\r\n          <button\r\n            onClick={() => {/* TODO: 分享功能 */}}\r\n            className=\"flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100\"\r\n            title=\"分享商品\"\r\n          >\r\n            <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 主要内容 */}\r\n      <div className=\"pb-20\">\r\n        {/* 商品图片轮播 */}\r\n        <div className=\"bg-white mb-2\">\r\n          <div className=\"aspect-square relative\">\r\n            <img\r\n              src={currentImages[selectedImageIndex]}\r\n              alt={product.name}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n            {product.tags && product.tags.length > 0 && (\r\n              <div className=\"absolute top-4 left-4\">\r\n                {product.tags.map((tag, index) => (\r\n                  <span\r\n                    key={index}\r\n                    className={`px-2 py-1 rounded text-xs font-medium text-white mr-2 ${\r\n                      tag === 'New' ? 'bg-blue-500' :\r\n                      tag === 'Sale' ? 'bg-red-500' :\r\n                      tag === 'Hot' ? 'bg-orange-500' : 'bg-gray-500'\r\n                    }`}\r\n                  >\r\n                    {tag}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* 图片导航 */}\r\n          {currentImages.length > 1 && (\r\n            <div className=\"flex justify-center py-3 gap-2\">\r\n              {currentImages.map((_, index) => (\r\n                               <button\r\n                 key={index}\r\n                 onClick={() => handleImageChange(index)}\r\n                 className={`w-3 h-3 rounded-full transition-colors ${\r\n                   index === selectedImageIndex ? 'bg-blue-600' : 'bg-gray-300'\r\n                 }`}\r\n                 title={`查看第${index + 1}张图片`}\r\n               />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* 商品基本信息 */}\r\n        <div className=\"bg-white px-4 py-6 mb-2\">\r\n          <h1 className=\"text-xl font-medium text-gray-900 mb-3\">{product.name}</h1>\r\n          \r\n          <div className=\"flex items-center gap-4 mb-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-2xl font-bold text-red-600\">¥{product.price.toFixed(2)}</span>\r\n              {product.originalPrice && (\r\n                <span className=\"text-sm text-gray-500 line-through\">¥{product.originalPrice.toFixed(2)}</span>\r\n              )}\r\n            </div>\r\n            {product.discount && (\r\n              <span className=\"bg-red-100 text-red-800 text-sm px-2 py-1 rounded\">\r\n                {product.discount}% OFF\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-4 mb-4\">\r\n            <div className=\"flex items-center gap-1\">\r\n              {renderStarRating(product.rating || 0)}\r\n              <span className=\"text-sm text-gray-600 ml-1\">\r\n                {product.rating?.toFixed(1)} ({product.reviews}条评价)\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between text-sm text-gray-600\">\r\n            <span>库存: {product.stock || 0}件</span>\r\n            <span>品牌: {product.brand || '暂无'}</span>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n        {/* 标签页 */}\r\n        <div className=\"bg-white\">\r\n          <div className=\"flex border-b border-gray-200\">\r\n            <button\r\n              onClick={() => setActiveTab('details')}\r\n              className={`flex-1 py-4 px-4 text-center font-medium ${\r\n                activeTab === 'details'\r\n                  ? 'text-blue-600 border-b-2 border-blue-600'\r\n                  : 'text-gray-500'\r\n              }`}\r\n            >\r\n              商品详情\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('reviews')}\r\n              className={`flex-1 py-4 px-4 text-center font-medium ${\r\n                activeTab === 'reviews'\r\n                  ? 'text-blue-600 border-b-2 border-blue-600'\r\n                  : 'text-gray-500'\r\n              }`}\r\n            >\r\n              用户评价 ({reviews.length})\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"px-4 py-6\">\r\n            {activeTab === 'details' && (\r\n              <div>\r\n                <div className=\"mb-6\">\r\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-3\">商品描述</h3>\r\n                  <p className=\"text-gray-600 leading-relaxed\">\r\n                    {product.description || '暂无商品描述'}\r\n                  </p>\r\n                </div>\r\n\r\n                {product.specifications && product.specifications.length > 0 && (\r\n                  <div className=\"mb-6\">\r\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-3\">商品规格</h3>\r\n                    <div className=\"space-y-2\">\r\n                      {product.specifications.map((spec, index) => (\r\n                        <div key={index} className=\"flex justify-between py-2 border-b border-gray-100\">\r\n                          <span className=\"text-gray-600\">{spec.name}</span>\r\n                          <span className=\"text-gray-900\">{spec.value}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {(product.shippingInfo || product.returnPolicy || product.warranty) && (\r\n                  <div>\r\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-3\">服务保障</h3>\r\n                    <div className=\"space-y-2\">\r\n                      {product.shippingInfo && (\r\n                        <div className=\"flex gap-2\">\r\n                          <span className=\"text-green-600\">🚚</span>\r\n                          <span className=\"text-gray-600\">{product.shippingInfo}</span>\r\n                        </div>\r\n                      )}\r\n                      {product.returnPolicy && (\r\n                        <div className=\"flex gap-2\">\r\n                          <span className=\"text-blue-600\">🔄</span>\r\n                          <span className=\"text-gray-600\">{product.returnPolicy}</span>\r\n                        </div>\r\n                      )}\r\n                      {product.warranty && (\r\n                        <div className=\"flex gap-2\">\r\n                          <span className=\"text-yellow-600\">🛡️</span>\r\n                          <span className=\"text-gray-600\">{product.warranty}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'reviews' && (\r\n              <div>\r\n                {reviews.length > 0 ? (\r\n                  <div>\r\n                    {reviews.map(renderReviewItem)}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8 text-gray-500\">\r\n                    暂无用户评价\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 底部操作栏 */}\r\n      <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3 flex items-center gap-3\">\r\n                 <button\r\n           onClick={handleToggleFavorite}\r\n           className={`flex flex-col items-center justify-center w-12 h-12 rounded-lg ${\r\n             isFavorite ? 'text-red-500' : 'text-gray-400'\r\n           }`}\r\n           title={isFavorite ? \"取消收藏\" : \"收藏商品\"}\r\n         >\r\n           <svg className=\"w-6 h-6\" fill={isFavorite ? \"currentColor\" : \"none\"} stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n             <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\r\n           </svg>\r\n         </button>\r\n        \r\n        <button\r\n          onClick={handleAddToCartClick}\r\n          className=\"flex-1 bg-yellow-500 text-white font-medium py-3 px-4 rounded-lg hover:bg-yellow-600 transition-colors\"\r\n        >\r\n          加入购物车\r\n        </button>\r\n        \r\n        <button\r\n          onClick={handleBuyNowClick}\r\n          className=\"flex-1 bg-red-500 text-white font-medium py-3 px-4 rounded-lg hover:bg-red-600 transition-colors\"\r\n        >\r\n          立即购买\r\n        </button>\r\n      </div>\r\n\r\n      {/* 规格选择弹框 */}\r\n      {product && (\r\n        <ProductSpecModal\r\n          product={product}\r\n          isOpen={isSpecModalOpen}\r\n          onClose={() => setIsSpecModalOpen(false)}\r\n          onConfirm={handleSpecConfirm}\r\n          confirmText={modalMode === 'cart' ? '加入购物车' : '立即购买'}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetailPage; "],"names":["ProductSpecModal","product","isOpen","onClose","onConfirm","confirmText","initialVariants","initialQuantity","selectedVariants","setSelectedVariants","useState","quantity","setQuantity","currentPrice","setCurrentPrice","useEffect","variants","v","type","firstVariant","_a","price","value","variant","getCurrentStock","selectedVariantItems","minStock","handleVariantSelect","prev","handleQuantityChange","newQuantity","maxStock","handleConfirm","missingVariants","renderVariantSelector","typeVariants","displayName","jsxs","jsx","isSelected","isOutOfStock","currentStock","ProductDetailPage","id","useParams","navigate","useNavigate","addItem","useCartStore","setProduct","reviews","setReviews","selectedImageIndex","setSelectedImageIndex","isFavorite","setIsFavorite","activeTab","setActiveTab","isLoading","setIsLoading","isSpecModalOpen","setIsSpecModalOpen","modalMode","setModalMode","productData","getProductById","reviewData","getProductReviews","handleGoBack","handleImageChange","index","handleToggleFavorite","handleAddToCartClick","handleBuyNowClick","handleSpecConfirm","finalPrice","renderStarRating","rating","stars","i","renderReviewItem","review","image","StatusBar","currentImages","tag","_","spec"],"mappings":"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"}