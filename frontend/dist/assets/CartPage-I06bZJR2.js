import{u as C,c as L,j as e,S as I,B}from"./index-DWm9dxUp.js";const z=()=>{const l=C(),{items:s,totalItems:i,totalPrice:M,selectedTotalItems:n,selectedTotalPrice:x,updateQuantity:h,removeItem:m,clearCart:u,toggleItemSelection:j,toggleAllSelection:g,getSelectedItems:b}=L(),p=()=>{l(-1)},d=(t,r)=>{h(t,r)},f=t=>{m(t)},c=t=>{l(`/product/${t}`)},v=t=>{j(t)},y=()=>{g()},N=()=>{if(b().length===0){alert("请选择要结算的商品");return}l("/checkout")},a=s.length>0&&s.every(t=>t.selected),o=s.some(t=>t.selected),k=t=>e.jsxs("div",{className:"flex items-start gap-4 bg-white p-4 rounded-lg shadow-sm mb-3",children:[e.jsx("div",{className:"flex items-center pt-2",children:e.jsx("button",{onClick:()=>v(t.id),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${t.selected?"border-red-500 bg-red-500":"border-gray-300"}`,title:t.selected?"取消选择":"选择商品",children:t.selected&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),e.jsx("div",{className:"w-24 h-24 rounded-md bg-gray-200 cursor-pointer",onClick:()=>c(t.productId),children:e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover rounded-md"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1 line-clamp-2 cursor-pointer",onClick:()=>c(t.productId),children:t.name}),e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:Object.entries(t.selectedVariants).map(([r,w])=>e.jsx("span",{className:"mr-2",children:`${r}: ${w}`},r))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-bold text-red-600",children:["¥",t.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(t.id,t.quantity-1),disabled:t.quantity<=1,className:"w-7 h-7 rounded-full border border-gray-300 flex items-center justify-center disabled:opacity-50",title:"减少数量",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})})}),e.jsx("span",{className:"text-md font-medium w-8 text-center",children:t.quantity}),e.jsx("button",{onClick:()=>d(t.id,t.quantity+1),disabled:t.quantity>=t.stock,className:"w-7 h-7 rounded-full border border-gray-300 flex items-center justify-center disabled:opacity-50",title:"增加数量",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]})]}),e.jsx("button",{onClick:()=>f(t.id),className:"text-gray-400 hover:text-red-500 transition-colors",title:"移除商品",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},t.id);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(I,{}),e.jsxs("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx("button",{onClick:p,className:"flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100",title:"返回",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsxs("h1",{className:"text-lg font-medium text-gray-900",children:["购物车 (",i,")"]}),e.jsx("button",{onClick:u,className:"text-sm font-medium text-gray-600 hover:text-red-600",children:"清空"})]}),s.length>0&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:y,className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${a?"border-red-500 bg-red-500":"border-gray-300"}`,title:a?"取消全选":"全选",children:a&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-sm text-gray-900",children:"全选"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["已选择 ",n," 件商品"]})]})]}),e.jsx("div",{className:"p-4 pb-40",children:s.length>0?s.map(k):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{className:"text-gray-500 mb-6",children:"购物车是空的"}),e.jsx("button",{onClick:()=>l("/shop"),className:"bg-blue-600 text-white font-medium py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors",children:"去逛逛"})]})}),s.length>0&&e.jsx("div",{className:"fixed bottom-16 left-0 right-0 bg-white border-t border-gray-200 z-40",children:e.jsxs("div",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["合计 (",n," 件):"]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"font-bold text-red-600 text-xl",children:["¥",x.toFixed(2)]})})]}),e.jsxs("button",{onClick:N,className:`w-full font-medium py-3 px-8 rounded-lg transition-colors ${o?"bg-red-500 text-white hover:bg-red-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!o,children:["结算 (",n,")"]})]})}),e.jsx(B,{})]})};export{z as default};
//# sourceMappingURL=CartPage-I06bZJR2.js.map
