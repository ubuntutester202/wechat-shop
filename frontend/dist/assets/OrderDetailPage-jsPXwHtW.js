import{u as f,b as w,r as d,j as e,S as x}from"./index-DWm9dxUp.js";const k={pending:{label:"待付款",color:"text-orange-600 bg-orange-50",description:"请尽快完成支付，订单将为您保留30分钟"},paid:{label:"待发货",color:"text-blue-600 bg-blue-50",description:"商家正在为您准备商品，请耐心等待"},shipped:{label:"待收货",color:"text-green-600 bg-green-50",description:"商品已发货，请注意查收快递"},delivered:{label:"已完成",color:"text-gray-600 bg-gray-50",description:"订单已完成，感谢您的购买"},cancelled:{label:"已取消",color:"text-red-600 bg-red-50",description:"订单已取消"}},L=()=>{const i=f(),{id:c}=w(),[s,u]=d.useState(null),[b,m]=d.useState(!0),[h,g]=d.useState(null),p=()=>{i(s?`/orders?status=${s.status}`:-1)};d.useEffect(()=>{(async()=>{if(c){m(!0),g(null);try{const r=await fetch(`/api/orders/${c}`);if(!r.ok)throw new Error("获取订单详情失败");const n=await r.json();u(n)}catch(r){g(r instanceof Error?r.message:"未知错误"),console.error("获取订单详情失败:",r)}finally{m(!1)}}})()},[c]);const j=a=>new Date(a).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),l=a=>`¥${a.toFixed(2)}`,t=a=>{console.log(`执行订单操作: ${a}`,s==null?void 0:s.id)},y=a=>{i(`/product/${a}`)};if(b)return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(x,{}),e.jsx("div",{className:"pt-12 px-4 py-4",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})]})]})})]});if(h||!s)return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(x,{}),e.jsx("div",{className:"pt-12 px-4 py-4",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"mx-auto w-24 h-24 mb-4 text-red-300",children:e.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"订单不存在"}),e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:h||"找不到指定的订单信息"}),e.jsx("button",{onClick:p,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"返回"})]})})]});const o=k[s.status],N=s.items.reduce((a,r)=>a+r.quantity,0);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(x,{}),e.jsx("div",{className:"bg-white shadow-sm pt-12",children:e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("button",{onClick:p,className:"mr-3 p-2 -ml-2 text-gray-600 hover:text-gray-900",title:"返回上一页","aria-label":"返回上一页",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"订单详情"})]})}),e.jsxs("div",{className:"px-4 py-4 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${o.color}`,children:o.label}),e.jsx("span",{className:"text-sm text-gray-500",children:j(s.createdAt)})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:o.description}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsxs("div",{children:["订单号: ",s.orderNumber]}),s.shipping.trackingNumber&&e.jsxs("div",{children:["快递单号: ",s.shipping.trackingNumber]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"商品信息"}),e.jsx("div",{className:"space-y-4",children:s.items.map((a,r)=>e.jsxs("div",{className:"flex items-start space-x-3 cursor-pointer hover:bg-gray-50 rounded-lg p-3 -mx-3 transition-colors",onClick:()=>y(a.productId),title:"点击查看商品详情",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1 hover:text-blue-600 transition-colors",children:a.name}),a.selectedVariants&&Object.keys(a.selectedVariants).length>0&&e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:Object.entries(a.selectedVariants).map(([n,v])=>e.jsxs("span",{className:"mr-3",children:[n,": ",v]},n))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["x",a.quantity]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:l(a.price)})]})]})]},r))}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"商品总价"}),e.jsx("span",{children:l(s.items.reduce((a,r)=>a+r.price*r.quantity,0))})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"运费"}),e.jsx("span",{children:l(s.shipping.fee)})]}),e.jsxs("div",{className:"flex justify-between items-center text-base font-semibold text-gray-900",children:[e.jsx("span",{children:"实付款"}),e.jsx("span",{className:"text-red-600",children:l(s.payment.amount)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"收货地址"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.address.name}),e.jsx("span",{className:"text-gray-600",children:s.address.phone})]}),e.jsxs("div",{className:"text-gray-600 leading-relaxed",children:[s.address.province," ",s.address.city," ",s.address.district,e.jsx("br",{}),s.address.detail]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"支付信息"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"支付方式"}),e.jsx("span",{className:"text-gray-900",children:"微信支付"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"商品总数"}),e.jsxs("span",{className:"text-gray-900",children:[N," 件"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"配送方式"}),e.jsx("span",{className:"text-gray-900",children:s.shipping.method})]}),s.payment.paidAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"支付时间"}),e.jsx("span",{className:"text-gray-900",children:j(s.payment.paidAt)})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:e.jsxs("div",{className:"flex space-x-3",children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t("cancel"),className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"取消订单"}),e.jsx("button",{onClick:()=>t("pay"),className:"flex-1 py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"立即付款"})]}),s.status==="shipped"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t("logistics"),className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"查看物流"}),e.jsx("button",{onClick:()=>t("confirm"),className:"flex-1 py-2 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"确认收货"})]}),s.status==="delivered"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t("review"),className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"评价商品"}),e.jsx("button",{onClick:()=>t("rebuy"),className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"再次购买"})]}),(s.status==="delivered"||s.status==="paid")&&e.jsx("button",{onClick:()=>t("contact"),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"联系客服"})]})})]})]})};export{L as default};
//# sourceMappingURL=OrderDetailPage-jsPXwHtW.js.map
